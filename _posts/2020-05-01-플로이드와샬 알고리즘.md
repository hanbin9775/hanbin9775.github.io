---
layout: post
author: Joel
tag : algorithm
---

플로이드와샬 알고리즘
===================

<br>
<br>
긴 이름에 비해 생각보다 어렵지 않은 알고리즘 '플로이드 와샬 알고리즘'

이 알고리즘에 대해 알아보자.

<br>
<br>
<br>
## 정의
<br>
>변의 가중치가 음이거나 양인 가중 그래프에서 최단 경로들을 찾는 알고리즘

<br>
<br>

라고 위키백과에 나와있다.

간단히 말하자면 가중 그래프에서 모든 정점에서 모든 정점으로의 최단 경로를 구하는 알고리즘이다.


다음과 같은 그래프가 있다 가정해보자.
<br>
<br>
![Alt text](../../../assets/img/2020-05-01/graph1.jpg){: width="70%" height="70%"}
<br>
<br>
위 그래프를 살펴보면 1번 노드에서 3번 노드로 한번에 갈 수 있는 방법이 없다.

하지만 다른 노드를 경유한다면 2번 노드를 거치거나 4번 노드를 거쳐 갈 수 있는데

2번 노드를 거친다면 14(5+9), 3번 노드를 거친다면 11(8+3)의 길이만큼 거쳐 갈 수 있다.

그러므로 1번 노드에서 3번 노드까지의 최소 경로 길이의 합은 11이다.

이렇게 모든 점(노드)에 대하여 각 점에 대해 최단 경로를 구하다는 것이다.

<br>
<br>
<br>
## 구현
<br>
<br>
플로이드 와샬 알고리즘의 핵심 아이디어는 <strong>거쳐가는 정점을 기준으로 출발 점과 도착 점의 최단 거리를 구한다</strong>는 것이다.

위 아이디어를 가지고 바로 소스코드를 작성해보자.

작성하기 전에 다음과 같은 변수가 선언되었다고 하자.

<br>
<br>
변수 선언

그래프는 인접행렬 arr로 표현
(c.f arr[i][j]는 i에서 j로 가는 경로의 길이)

i = 거쳐가는 점 

j = 출발하는 점

k = 도착하는 점

vertex = 총 점의 개수

한 번에 갈 수 없는 경우 거리는 INF로 표현
<br>
<br>
위 변수를 가지고 모든 점에 대해서 출발해서 거쳐가고 도착하는 알고리즘을 작성해보자. 다시 한번 말하지만 <strong>거쳐 가는 점</strong>이 기준이다.
<br>
<br>
![Alt text](../../../assets/img/2020-05-01/source1.jpg){: width="70%" height="70%"}
<br>
<br>
![Alt text](../../../assets/img/2020-05-01/source2.jpg){: width="70%" height="70%"}
<br>
<br>
![Alt text](../../../assets/img/2020-05-01/source3.jpg){: width="70%" height="70%"}
<br>
<br>

자 이제 위 반복문을 통해 모든 경우에 대해 조사해 볼 수 있게 되었다.

이제 최소 거리를 구하는 식만 작성해주면 된다.

최소 거리를 구하기 위해서는 한 가지 조건이 있다. 

j에서 출발해 i를 거쳐 k로 도착하기 위해선 당연하게도  j에서 출발해 i로 가는 경로와 i에서 출발해 k로 가는 경로가 동시에 존재해야한다.

위 조건을 식으로 작성해보자.
<br>
<br>
![Alt text](../../../assets/img/2020-05-01/if1.jpg){: width="70%" height="70%"}
<br>
<br>

i를 거친 경로가 존재한다는 조건문을 통과했다면 

다음은 j에서 k로 한번에 가는 것과 i를 거쳐 가는 경로의 길이를 비교해서 더 작은 값으로 그래프 값을 대체해주는 것이다.

<br>
<br>
![Alt text](../../../assets/img/2020-05-01/if2.jpg){: width="70%" height="70%"}
<br>
<br>

위 코드들을 한번에 작성하면 다음과 같다.

<br>
<br>
![Alt text](../../../assets/img/2020-05-01/fullsource.jpg)
<br>
<br>


### 출처 및 참고

<https://m.blog.naver.com/PostView.nhn?blogId=ndb796&logNo=221234427842&proxyReferer=https:%2F%2Fwww.google.com%2F>

<https://ko.wikipedia.org/wiki/%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%93%9C-%EC%9B%8C%EC%85%9C_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98>
